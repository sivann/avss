#!/bin/csh -f

#finds relative groups based on style
#e.g. findrel "beatles"

set path=(/var/www/mp3 $path)

set lineno=`fgrep -n "$1" /var/www/mp3/stylelist | head -1|cut -d: -f1`
#cat stylebins|sed -e "$lineno p" -e '1,$d'>refbin.tmp
echo $lineno|printlines /var/www/mp3/stylebins >/tmp/refbin.tmp.$$

#foreach line (`calcrelevance refbin.tmp stylebins | sort -rn | head -20|cut -d: -f2`)
#  grep -n . stylelist | egrep "^${line}:"|cut -d: -f2
#end

#calcrelevance /tmp/refbin.tmp.$$ /var/www/mp3/stylebins | sort -rn | head -20|cut -d: -f2|printlines /var/www/mp3/stylelist|cut -d: -f1|sed 's,:/kill-9/sorted,:,' 

calcrelevance /tmp/refbin.tmp.$$ /var/www/mp3/stylebins | sort -rn | head -20 | awk -F: '{printf ("%s %s\n",$2,$1);}' | printlines /var/www/mp3/stylelist | cut -d: -f1,2 | sed 's,:/kill-9/sorted,:,'

/bin/rm -f /tmp/refbin.tmp.$$
